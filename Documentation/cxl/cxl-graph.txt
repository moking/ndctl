// SPDX-License-Identifier: GPL-2.0
// Copyright (C) 2022 Fan Ni <fan.ni@samsung.com>

cxl-graph(1)
===========

NAME
----
cxl-graph - plot or dump the CXL topology to a graph or a json formatted file.

SYNOPSIS
--------
[verse]
'cxl graph' [<options>]

options:
-v::
--verbose::
	Increase verbosity of the output. This can be specified
	multiple times to be even more verbose on the
	informational and miscellaneous output, and can be used
	to override omitted flags for showing specific
	information. Note that cxl list --verbose --verbose is
	equivalent to cxl list -vv.
	- *-v*
	  Enable --memdevs, --regions, --buses,
	  --ports, --decoders, and --targets.
	- *-vv*
	  Everything *-v* provides, plus include disabled
	  devices with --idle.
	- *-vvv*
	  Everything *-vv* provides, plus enable
	  --health and --partition.

-o::
--output-file::
	Create an image of the CXL topology or a json formatted representation of
	the CXL. One can specify an output with -o or --output-file, when a
	jpg/png/jpeg suffix is provided a graph containing a graph of the CXL
	topology will be generated, and if the suffix is none/txt/json, the cxl
	topology will be dumped in a json format to the provided file. Note this
	option will automatically turn on the verbose option (verbose=3) and disable
	the -E option.

--input::
	This option takes a json-formatted file with valid cxl topology and generate
	a graph showing the CXL topology accordingly. The graph will be stored in a
	file (.jpg, .png or .jpeg) identified by the `-o` or `--output-file` option
	or in topology.png if no such output option is given.

--debug::
	If the cxl tool was built with debug enabled, turn on debug
	messages.

EXAMPLE
-------
----
1. Taking 'cxl list' output as input to plot a graph
	cxl list -vvv > input.json
	cxl graph --input input.json [-o graph.png]

2. Parsing the cxl topology as cxl list does and plotting a graph
	cxl graph -vvv [-o a.png/a.jpg/a.jpeg]

3. Parsing the cxl topology as cxl list does and dump the topology to a json
formatted file
	cxl graph -vvv -o a.txt/a.json

include::human-option.txt[]

include::../copyright.txt[]

SEE ALSO
--------
linkcxl:cxl-list[1]
